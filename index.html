<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>–¢—Ä–µ–∫–µ—Ä –±—é–¥–∂–µ—Ç–∞ üìä</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css  " rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <header>
            <h1><i class="fas fa-wallet"></i> –¢—Ä–µ–∫–µ—Ä –ª–∏—á–Ω–æ–≥–æ –±—é–¥–∂–µ—Ç–∞</h1>
            <p>–°–ª–µ–¥–∏—Ç–µ –∑–∞ —Ç—Ä–∞—Ç–∞–º–∏ –∏ –¥–æ—Å—Ç–∏–≥–∞–π—Ç–µ —Ü–µ–ª–µ–π üéØ</p>
        </header>

        <div class="content">
            <!-- –§–æ—Ä–º–∞ —Ä–∞—Å—á—ë—Ç–∞ –ª–∏–º–∏—Ç–æ–≤ -->
            <div class="section">
                <h3><i class="fas fa-calculator"></i> 1. –†–∞—Å—Å—á–∏—Ç–∞—Ç—å –ª–∏–º–∏—Ç—ã</h3>
                <form id="budgetForm" class="grid">
                    <label><i class="fas fa-coins"></i> –ó–∞—Ä–ø–ª–∞—Ç–∞ (‚ÇΩ)</label>
                    <input type="number" id="salary" value="50000" required>

                    <label><i class="fas fa-home"></i> –ê—Ä–µ–Ω–¥–∞ (‚ÇΩ)</label>
                    <input type="number" id="rent" value="15000" required>

                    <label><i class="fas fa-credit-card"></i> –ö—Ä–µ–¥–∏—Ç (‚ÇΩ)</label>
                    <input type="number" id="loan" value="4400" required>

                    <label><i class="fas fa-bolt"></i> –ö–æ–º–º—É–Ω–∞–ª–∫–∞ (‚ÇΩ)</label>
                    <input type="number" id="utilities" value="2000" required>

                    <label><i class="fas fa-wifi"></i> –ò–Ω—Ç–µ—Ä–Ω–µ—Ç/—Å–≤—è–∑—å (‚ÇΩ)</label>
                    <input type="number" id="internet" value="300" required>

                    <label><i class="fas fa-flag-checkered"></i> –¶–µ–ª—å (‚ÇΩ)</label>
                    <input type="number" id="savingsGoal" value="55000" required>

                    <label><i class="fas fa-calendar-alt"></i> –°—Ä–æ–∫ (–º–µ—Å)</label>
                    <input type="number" id="months" value="3" min="1" required>
                </form>
                <button onclick="calculateBudget()">
                    <i class="fas fa-sliders-h"></i> –†–∞—Å—Å—á–∏—Ç–∞—Ç—å –ª–∏–º–∏—Ç—ã
                </button>
            </div>

            <!-- –§–æ—Ä–º–∞ –≤–≤–æ–¥–∞ —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏—Ö —Ç—Ä–∞—Ç -->
            <div class="section" id="spendingSection" style="display: none;">
                <h3><i class="fas fa-shopping-cart"></i> 2. –í–≤–µ–¥–∏—Ç–µ —Å–≤–æ–∏ —Ç—Ä–∞—Ç—ã</h3>
                <form id="spendingForm" class="grid">
                    <label><i class="fas fa-apple-alt" style="color:#27ae60;"></i> –ü–æ—Ç—Ä–∞—á–µ–Ω–æ –Ω–∞ –µ–¥—É (‚ÇΩ)</label>
                    <input type="number" id="spentFood" value="0" min="0" oninput="updateTracking()">

                    <label><i class="fas fa-bus" style="color:#3498db;"></i> –ü–æ—Ç—Ä–∞—á–µ–Ω–æ –Ω–∞ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç (‚ÇΩ)</label>
                    <input type="number" id="spentTransport" value="0" min="0" oninput="updateTracking()">

                    <label><i class="fas fa-toilet-paper" style="color:#9b59b6;"></i> –ü–æ—Ç—Ä–∞—á–µ–Ω–æ –Ω–∞ –ª–∏—á–Ω–æ–µ (‚ÇΩ)</label>
                    <input type="number" id="spentPersonal" value="0" min="0" oninput="updateTracking()">

                    <label><i class="fas fa-theater-masks" style="color:#f39c12;"></i> –ü–æ—Ç—Ä–∞—á–µ–Ω–æ –Ω–∞ —Ä–∞–∑–≤–ª–µ—á–µ–Ω–∏—è (‚ÇΩ)</label>
                    <input type="number" id="spentMisc" value="0" min="0" oninput="updateTracking()">
                </form>
            </div>

            <!-- –†–µ–∑—É–ª—å—Ç–∞—Ç -->
            <div id="result">
                <!-- –°—é–¥–∞ –±—É–¥–µ—Ç –ø–æ–¥—Å—Ç–∞–≤–ª—è—Ç—å—Å—è —Ç–∞–±–ª–∏—Ü–∞ -->
            </div>
        </div>

        <div class="footer">
            <i class="fas fa-sun"></i> ¬© <script>document.write(new Date().getFullYear())</script> –ë—é–¥–∂–µ—Ç-—Ç—Ä–µ–∫–µ—Ä | –ú–µ—á—Ç–∞–π –æ –ï–≥–∏–ø—Ç–µ üá™üá¨
        </div>
    </div>

    <script>
        let limits = {};

        function calculateBudget() {
            const resultDiv = document.getElementById('result');
            resultDiv.classList.remove('show');

            const salary = parseFloat(document.getElementById('salary').value) || 0;
            const rent = parseFloat(document.getElementById('rent').value) || 0;
            const loan = parseFloat(document.getElementById('loan').value) || 0;
            const utilities = parseFloat(document.getElementById('utilities').value) || 0;
            const internet = parseFloat(document.getElementById('internet').value) || 0;
            const savingsGoal = parseFloat(document.getElementById('savingsGoal').value) || 0;
            const months = parseInt(document.getElementById('months').value) || 1;

            setTimeout(() => {
                if (salary <= 0 || months <= 0) {
                    resultDiv.innerHTML = `<div class="error"><i class="fas fa-exclamation-triangle"></i> –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –ø–æ–ª—è.</div>`;
                    resultDiv.classList.add('show');
                    return;
                }

                const fixedExpenses = rent + loan + utilities + internet;
                if (fixedExpenses > salary) {
                    resultDiv.innerHTML = `<div class="error"><i class="fas fa-times-circle"></i> –†–∞—Å—Ö–æ–¥—ã (${fixedExpenses.toLocaleString()} ‚ÇΩ) –ø—Ä–µ–≤—ã—à–∞—é—Ç –¥–æ—Ö–æ–¥.</div>`;
                    resultDiv.classList.add('show');
                    return;
                }

                const requiredMonthlySavings = savingsGoal / months;
                const availableForLiving = salary - fixedExpenses - requiredMonthlySavings;

                if (availableForLiving < 0) {
                    const deficit = Math.abs(availableForLiving).toFixed(0);
                    resultDiv.innerHTML = `<div class="error"><i class="fas fa-ban"></i> –ù–µ —Ö–≤–∞—Ç–∞–µ—Ç ${deficit.replace(/\B(?=(\d{3})+(?!\d))/g, " ")} ‚ÇΩ –≤ –º–µ—Å—è—Ü.</div>`;
                    resultDiv.classList.add('show');
                    return;
                }

                // –°–æ—Ö—Ä–∞–Ω—è–µ–º –ª–∏–º–∏—Ç—ã
                limits = {
                    food: availableForLiving * 0.5,
                    transport: availableForLiving * 0.2,
                    personal: availableForLiving * 0.15,
                    misc: availableForLiving * 0.15
                };

                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Ñ–æ—Ä–º—É –≤–≤–æ–¥–∞ —Ç—Ä–∞—Ç
                document.getElementById('spendingSection').style.display = 'block';

                // –ü–µ—Ä–≤–∏—á–Ω—ã–π —Ä–∞—Å—á—ë—Ç
                updateTracking();

                resultDiv.classList.add('show');
            }, 150);
        }

        function updateTracking() {
            if (Object.keys(limits).length === 0) return;

            const spentFood = parseFloat(document.getElementById('spentFood').value) || 0;
            const spentTransport = parseFloat(document.getElementById('spentTransport').value) || 0;
            const spentPersonal = parseFloat(document.getElementById('spentPersonal').value) || 0;
            const spentMisc = parseFloat(document.getElementById('spentMisc').value) || 0;

            const remaining = {
                food: limits.food - spentFood,
                transport: limits.transport - spentTransport,
                personal: limits.personal - spentPersonal,
                misc: limits.misc - spentMisc
            };

            // –§—É–Ω–∫—Ü–∏—è —Å—Ç–∞—Ç—É—Å–∞
            function getStatus(rem, limit) {
                const percent = (rem / limit) * 100;
                if (percent <= 20) return { class: 'status-red', text: '–ü–µ—Ä–µ—Ä–∞—Å—Ö–æ–¥' };
                if (percent <= 50) return { class: 'status-yellow', text: '–ë–ª–∏–∑–∫–æ' };
                return { class: 'status-green', text: '–í –Ω–æ—Ä–º–µ' };
            }

            let tableHTML = `
                <div class="result-card">
                    <h2><i class="fas fa-chart-line"></i> –¢–µ–∫—É—â–∏–µ —Ç—Ä–∞—Ç—ã</h2>
                    <table class="budget-table">
                        <thead>
                            <tr>
                                <th>–ö–∞—Ç–µ–≥–æ—Ä–∏—è</th>
                                <th>–õ–∏–º–∏—Ç</th>
                                <th>–ü–æ—Ç—Ä–∞—á–µ–Ω–æ</th>
                                <th>–û—Å—Ç–∞–ª–æ—Å—å</th>
                                <th>–°—Ç–∞—Ç—É—Å</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><i class="fas fa-apple-alt" style="color:#27ae60;"></i> –ï–¥–∞</td>
                                <td class="amount">${limits.food.toFixed(0).replace(/\B(?=(\d{3})+(?!\d))/g, " ")} ‚ÇΩ</td>
                                <td class="amount">${spentFood.toFixed(0).replace(/\B(?=(\d{3})+(?!\d))/g, " ")} ‚ÇΩ</td>
                                <td class="amount">${remaining.food.toFixed(0).replace(/\B(?=(\d{3})+(?!\d))/g, " ")} ‚ÇΩ</td>
                                <td><span class="status ${getStatus(remaining.food, limits.food).class}">${getStatus(remaining.food, limits.food).text}</span></td>
                            </tr>
                            <tr>
                                <td><i class="fas fa-bus" style="color:#3498db;"></i> –¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç</td>
                                <td class="amount">${limits.transport.toFixed(0).replace(/\B(?=(\d{3})+(?!\d))/g, " ")} ‚ÇΩ</td>
                                <td class="amount">${spentTransport.toFixed(0).replace(/\B(?=(\d{3})+(?!\d))/g, " ")} ‚ÇΩ</td>
                                <td class="amount">${remaining.transport.toFixed(0).replace(/\B(?=(\d{3})+(?!\d))/g, " ")} ‚ÇΩ</td>
                                <td><span class="status ${getStatus(remaining.transport, limits.transport).class}">${getStatus(remaining.transport, limits.transport).text}</span></td>
                            </tr>
                            <tr>
                                <td><i class="fas fa-toilet-paper" style="color:#9b59b6;"></i> –õ–∏—á–Ω—ã–µ</td>
                                <td class="amount">${limits.personal.toFixed(0).replace(/\B(?=(\d{3})+(?!\d))/g, " ")} ‚ÇΩ</td>
                                <td class="amount">${spentPersonal.toFixed(0).replace(/\B(?=(\d{3})+(?!\d))/g, " ")} ‚ÇΩ</td>
                                <td class="amount">${remaining.personal.toFixed(0).replace(/\B(?=(\d{3})+(?!\d))/g, " ")} ‚ÇΩ</td>
                                <td><span class="status ${getStatus(remaining.personal, limits.personal).class}">${getStatus(remaining.personal, limits.personal).text}</span></td>
                            </tr>
                            <tr>
                                <td><i class="fas fa-theater-masks" style="color:#f39c12;"></i> –†–∞–∑–≤–ª–µ—á–µ–Ω–∏—è</td>
                                <td class="amount">${limits.misc.toFixed(0).replace(/\B(?=(\d{3})+(?!\d))/g, " ")} ‚ÇΩ</td>
                                <td class="amount">${spentMisc.toFixed(0).replace(/\B(?=(\d{3})+(?!\d))/g, " ")} ‚ÇΩ</td>
                                <td class="amount">${remaining.misc.toFixed(0).replace(/\B(?=(\d{3})+(?!\d))/g, " ")} ‚ÇΩ</td>
                                <td><span class="status ${getStatus(remaining.misc, limits.misc).class}">${getStatus(remaining.misc, limits.misc).text}</span></td>
                            </tr>
                            <tr class="total-row">
                                <td><strong>–ò—Ç–æ–≥–æ</strong></td>
                                <td class="amount">${(limits.food + limits.transport + limits.personal + limits.misc).toFixed(0).replace(/\B(?=(\d{3})+(?!\d))/g, " ")} ‚ÇΩ</td>
                                <td class="amount">${(spentFood + spentTransport + spentPersonal + spentMisc).toFixed(0).replace(/\B(?=(\d{3})+(?!\d))/g, " ")} ‚ÇΩ</td>
                                <td class="amount">${(remaining.food + remaining.transport + remaining.personal + remaining.misc).toFixed(0).replace(/\B(?=(\d{3})+(?!\d))/g, " ")} ‚ÇΩ</td>
                                <td></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            `;

            document.getElementById('result').innerHTML = tableHTML;
            document.getElementById('result').classList.add('show');
        }
    </script>
</body>
</html>

